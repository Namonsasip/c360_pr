# Configuration to specify all the things needed to run the data quality pipeline
# Params:
# `features_for_dq`:
#    key: dataset name
#    value: List of dict containing 2 keys:
#     - `feature`: name of the feature to be processed.
#                 If you specify asterisk (*) e.g. feature: "*", it will process all "numeric" columns.
#                 You can still put outlier formula per individual column (see example below).
#                 You can also process non numeric column by specifying the feature after the * (see example below).
#
#     - (optional) `outlier_formula`: SQL logic to count the outlier value.
#                                     You can use {col} as placeholder for current column name (see the example below)
#
#    Example (this will process all columns in `l4_touchpoints_to_call_center_features`
#    and run the outlier formula the specified column):
#
#    l4_touchpoints_to_call_center_features:
#      - feature: '*'
#      - feature: sum_touchpoints_number_of_calls_on_cc_sum_weekly_last_week
#        outlier_formula: "sum(case when {col} < 0 or {col} > 500 then 1 else 0 end)"
#      - feature: subscription_identifier  <-- this will include subscription_identifier in the process

sample_size: 100000

percentiles:
  accuracy: 90
  percentile_list:
    - 0.1
    - 0.25  # do not removed. For outlier calculation
    - 0.5
    - 0.75  # do not removed. For outlier calculation
    - 0.9

dq_consistency_path_prefix: DQ/dq_consistency_benchmark_dataset

benchmark_start_date: "2020-01-01"
benchmark_end_date: "2020-07-30"

threshold_lookback_corresponding_dates: 120


incremental_mode: "off" # on = incremental mode activated / off = incremental mode deactivated


features_for_dq:
  l1_revenue_prepaid_pru_f_usage_multi_daily:
    - feature: 'rev_arpu_total_net_rev'
    - feature: 'rev_arpu_net_tariff_rev_reward'
    - feature: 'rev_arpu_net_tariff_rev_exc_reward'
    - feature: 'rev_arpu_share_of_exc_reward_over_total_rev'
    - feature: 'rev_arpu_share_of_revenue_reward_over_total_rev'
    - feature: 'rev_arpu_diff_in_exc_reward_rev_reward'
    - feature: 'rev_arpu_data_number_of_on_top_pkg'
    - feature: 'rev_arpu_data_rev'
    - feature: 'rev_arpu_data_rev_by_on_top_pkg'
    - feature: 'rev_arpu_data_rev_by_ppu'
    - feature: 'rev_arpu_data_rev_4g'
    - feature: 'rev_arpu_share_data_rev_4g'
    - feature: 'rev_arpu_data_rev_by_on_top_4g'
    - feature: 'rev_arpu_share_data_rev_by_pkg_4g'
    - feature: 'rev_arpu_data_rev_by_ppu_4g'
    - feature: 'rev_arpu_share_data_rev_by_ppu_4g'
    - feature: 'rev_arpu_data_rev_2g_3g'
    - feature: 'rev_arpu_share_data_rev_2g_3g'
    - feature: 'rev_arpu_data_rev_by_on_top_pkg_2g_3g'
    - feature: 'rev_arpu_share_data_rev_by_on_top_pkg_2g_3g'
    - feature: 'rev_arpu_data_rev_by_ppu_2g_3g'
    - feature: 'rev_arpu_share_data_rev_by_ppu_2g_3g'
    - feature: 'rev_arpu_data_rev_by_per_unit'
    - feature: 'rev_arpu_data_rev_per_unit_2g_3g'
    - feature: 'rev_arpu_data_rev_per_unit_4g'
    - feature: 'rev_arpu_diff_rev_by_on_top_pkg_ppu'
    - feature: 'rev_arpu_diff_rev_by_on_top_pkg_ppu_4g'
    - feature: 'rev_arpu_diff_rev_by_on_top_pkg_ppu_2g_3g'
    - feature: 'rev_arpu_diff_rev_2g_3g_vs_4g'
    - feature: 'rev_arpu_diff_rev_per_unit_2g_3g_vs_4g'
    - feature: 'rev_arpu_voice'
    - feature: 'rev_arpu_voice_intra_ppu'
    - feature: 'rev_arpu_share_voice_intra'
    - feature: 'rev_arpu_voice_non_intra_ppu'
    - feature: 'rev_arpu_share_voice_non_intra'
    - feature: 'rev_arpu_voice_per_call'
    - feature: 'rev_arpu_voice_intra_per_call'
    - feature: 'rev_arpu_voice_non_intra_per_call'
    - feature: 'rev_arpu_voice_per_minute'
    - feature: 'rev_arpu_voice_intra_per_minute'
    - feature: 'rev_arpu_voice_non_intra_per_minute'
    - feature: 'rev_arpu_diff_voice_intra_non_intra'
    - feature: 'rev_arpu_diff_voice_intra_non_intra_per_min'
    - feature: 'rev_arpu_diff_voice_intra_non_intra_per_call'
    - feature: 'rev_arpu_days_0_rev'
    - feature: 'rev_arpu_days_data_0_rev'
    - feature: 'rev_arpu_days_data_on_top_pkg_0_rev'
    - feature: 'rev_arpu_days_data_ppu_0_rev'
    - feature: 'rev_arpu_days_4g_data_0_rev'
    - feature: 'rev_arpu_days_2g_3g_data_0_rev'
    - feature: 'rev_arpu_days_4g_data_on_top_pkg_0_rev'
    - feature: 'rev_arpu_days_2g_3g_data_on_top_pkg_0_rev'
    - feature: 'rev_arpu_days_4g_data_ppu_0_rev'
    - feature: 'rev_arpu_days_2g_3g_data_ppu_0_rev'
    - feature: 'rev_arpu_days_voice_0_rev'
    - feature: 'rev_arpu_days_voice_intra_0_rev'
    - feature: 'rev_arpu_days_voice_non_intra_0_rev'
    - feature: 'rev_arpu_days_voice_per_call_0_rev'
    - feature: 'rev_arpu_days_voice_intra_per_call_0_rev'
    - feature: 'rev_arpu_days_voice_non_intra_per_call_0_rev'
    - feature: 'rev_arpu_days_voice_per_min_0_rev'
    - feature: 'rev_arpu_days_voice_intra_per_min_0_rev'
    - feature: 'rev_arpu_days_voice_non_intra_per_min_0_rev'
    - feature: 'rev_arpu_data_last_date_on_top_pkg'
    - feature: 'event_partition_date'

